"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("vue"),o=require("./useSecureStorage-BV_9SDab.js"),c=require("./6.0.cjs"),h=t.defineComponent({__name:"Alert",props:{message:{type:String,required:!0}},emits:["close"],setup(e,{emit:a}){const n=e,r=a,i=o.usePopup("6.0");return i.isVersionAtLeast("6.2")&&t.onMounted(()=>{i.showAlert(n.message,()=>r("close"))}),(s,u)=>null}}),S=t.defineComponent({__name:"BackButton",props:{visible:{type:Boolean,default:!0}},emits:["click"],setup(e,{emit:a}){const n=e,r=a,i=o.useBackButton("6.0");return i.isVersionAtLeast("6.1")&&(t.watch(()=>n.visible,s=>{s?i.show():i.hide()}),i.onClick(()=>r("click")),t.onMounted(()=>{n.visible&&t.nextTick(()=>{i.show()})}),t.onBeforeUnmount(()=>i.hide())),(s,u)=>null}}),B=t.defineComponent({__name:"BiometricManager",emits:["init"],setup(e,{emit:a}){const n=a,r=o.useBiometricManager("6.0");return r.isVersionAtLeast("7.2")&&t.onMounted(()=>r.init(()=>n("init"))),(i,s)=>null}}),C=t.defineComponent({__name:"ClosingConfirmation",setup(e){const a=o.useMiniApp("6.0");return a.isVersionAtLeast("6.2")&&(t.onMounted(()=>{a.isClosingConfirmationEnabled.value=!0}),t.onBeforeUnmount(()=>{a.isClosingConfirmationEnabled.value=!1})),(n,r)=>null}}),b=t.defineComponent({__name:"Confirm",props:{message:{type:String,required:!0}},emits:["close"],setup(e,{emit:a}){const n=e,r=a,i=o.usePopup("6.0");return i.isVersionAtLeast("6.2")&&t.onMounted(()=>i.showConfirm(n.message,s=>r("close",s))),(s,u)=>null}}),A=t.defineComponent({__name:"ExpandedViewport",props:{force:{type:Boolean,default:!1}},setup(e){const a=e,n=o.useViewport("6.0");return n.isVersionAtLeast("7.7")?(t.onMounted(()=>{n.isVerticalSwipesEnabled.value=!1}),t.onBeforeUnmount(()=>{n.isVerticalSwipesEnabled.value=!0})):(t.watch(()=>a.force,r=>{r&&!n.isExpanded.value&&n.expand()},{immediate:!0}),o.onViewportChanged(({isStateStable:r})=>{a.force&&r&&!n.isExpanded.value&&n.expand()})),t.onMounted(()=>n.expand()),(r,i)=>null}}),y=t.defineComponent({__name:"FullscreenViewport",setup(e){const a=o.useViewport("6.0");return a.isVersionAtLeast("8.0")&&(t.onMounted(()=>{a.isFullscreen.value=!0}),t.onBeforeUnmount(()=>{a.isFullscreen.value=!1})),(n,r)=>null}}),k=t.defineComponent({__name:"MainButton",props:{text:{type:String},color:{type:String},textColor:{type:String},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},progress:{type:Boolean,default:!1},hasShineEffect:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const n=e,r=a,i=o.useMainButton("6.0");return t.watch(()=>n.text,s=>{i.setParams({text:s})}),t.watch(()=>n.color,s=>{i.setParams({color:s})}),t.watch(()=>n.textColor,s=>{i.setParams({text_color:s})}),t.watch(()=>n.visible,s=>{i.setParams({is_visible:s})}),t.watch(()=>n.disabled,s=>{i.setParams({is_active:!s})}),t.watch(()=>n.progress,s=>{s?i.showProgress():i.hideProgress()}),i.isVersionAtLeast("7.10")&&t.watch(()=>n.hasShineEffect,s=>{i.hasShineEffect.value=s}),i.onClick(()=>r("click")),t.onMounted(()=>{t.nextTick(()=>{n.progress?i.showProgress():i.hideProgress(),i.setParams({text:n.text,text_color:n.textColor,color:n.color,has_shine_effect:n.hasShineEffect,is_active:!n.disabled,is_visible:n.visible})})}),t.onBeforeUnmount(()=>{i.hideProgress(),i.hide()}),(s,u)=>null}}),v=t.defineComponent({__name:"Popup",props:{title:{type:String},message:{type:String,required:!0},buttons:{type:Array}},emits:["close"],setup(e,{emit:a}){const n=e,r=a,i=o.usePopup("6.0");return i.isVersionAtLeast("6.2")&&t.onMounted(()=>i.showPopup({title:n.title,message:n.message,buttons:n.buttons},s=>r("close",s))),(s,u)=>null}}),w=t.defineComponent({__name:"ScanQr",props:{text:{type:String}},emits:["result"],setup(e,{emit:a}){const n=e,r=a,i=o.useQrScanner("6.0");return i.isVersionAtLeast("6.4")&&(t.onMounted(()=>{i.show({text:n.text},s=>r("result",s))}),t.onBeforeUnmount(()=>{i.close()})),(s,u)=>null}}),x=t.defineComponent({__name:"SecondaryButton",props:{text:{type:String},color:{type:String},textColor:{type:String},visible:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},progress:{type:Boolean,default:!1},hasShineEffect:{type:Boolean,default:!1},position:{type:String}},emits:["click"],setup(e,{emit:a}){const n=e,r=a,i=o.useSecondaryButton("6.0");return i.isVersionAtLeast("7.10")&&(t.watch(()=>n.text,s=>{i.setParams({text:s})}),t.watch(()=>n.color,s=>{i.setParams({color:s})}),t.watch(()=>n.textColor,s=>{i.setParams({text_color:s})}),t.watch(()=>n.visible,s=>{i.setParams({is_visible:s})}),t.watch(()=>n.disabled,s=>{i.setParams({is_active:!s})}),t.watch(()=>n.progress,s=>{s?i.showProgress():i.hideProgress()}),t.watch(()=>n.hasShineEffect,s=>{i.hasShineEffect.value=s}),t.watch(()=>n.position,s=>{i.position.value=s}),i.onClick(()=>r("click")),t.onMounted(()=>{t.nextTick(()=>{n.progress?i.showProgress():i.hideProgress(),i.setParams({text:n.text,text_color:n.textColor,color:n.color,has_shine_effect:n.hasShineEffect,position:n.position,is_active:!n.disabled,is_visible:n.visible})})}),t.onBeforeUnmount(()=>{i.hideProgress(),i.hide()})),(s,u)=>null}}),M=t.defineComponent({__name:"SettingsButton",props:{visible:{type:Boolean,default:!0}},emits:["click"],setup(e,{emit:a}){const n=e,r=a,i=o.useSettingsButton("6.0");return i.isVersionAtLeast("7.0")&&(t.watch(()=>n.visible,s=>{s?i.show():i.hide()}),i.onClick(()=>r("click")),t.onMounted(()=>{n.visible&&t.nextTick(()=>{i.show()})}),t.onBeforeUnmount(()=>{i.hide()})),(s,u)=>null}}),_=t.defineComponent({__name:"DiscussionWidget",props:{url:{type:String,required:!0},commentsLimit:{type:Number,default:null},height:{type:String,default:null},color:{type:String,default:null},darkColor:{type:String,default:null},dark:{type:Boolean,default:null},colorful:{type:Boolean,default:null},tag:{type:String,default:"div"}},setup(e){const a=e,n=t.computed(()=>JSON.stringify(a));return(r,i)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.tag),{key:n.value},{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent("script"),{async:"",src:"https://telegram.org/js/telegram-widget.js?22","data-telegram-discussion":e.url,"data-comments-limit":e.commentsLimit,"data-height":e.height,"data-color":e.color,"data-dark-color":e.darkColor,"data-dark":e.dark,"data-colorful":e.colorful},null,8,["data-telegram-discussion","data-comments-limit","data-height","data-color","data-dark-color","data-dark","data-colorful"]))]),_:1}))}}),P=t.defineComponent({__name:"LoginWidget",props:{botUsername:{type:String,required:!0},redirectUrl:{type:String,default:null},size:{type:String,default:null},cornerRadius:{type:String,default:null},userPhoto:{type:Boolean,default:null},requestWrite:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["auth"],setup(e,{emit:a}){const n=e,r=a,i=t.computed(()=>JSON.stringify(n));return t.onMounted(()=>{window.onTelegramAuth=s=>r("auth",s)}),(s,u)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.tag),{key:i.value},{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent("script"),{async:"",src:"https://telegram.org/js/telegram-widget.js?22","data-telegram-login":e.botUsername,"data-size":e.size,"data-radius":e.cornerRadius,"data-userpic":e.userPhoto,"data-request-access":e.requestWrite?"write":null,"data-onauth":e.redirectUrl?null:"onTelegramAuth(user)","data-auth-url":e.redirectUrl},null,8,["data-telegram-login","data-size","data-radius","data-userpic","data-request-access","data-onauth","data-auth-url"]))]),_:1}))}}),T=t.defineComponent({__name:"PostWidget",props:{url:{type:String,required:!0},width:{type:String,default:null},authorPhoto:{type:Boolean,default:null},color:{type:String,default:null},darkColor:{type:String,default:null},dark:{type:Boolean,default:null},tag:{type:String,default:"div"}},setup(e){const a=e,n=t.computed(()=>JSON.stringify(a));return(r,i)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.tag),{key:n.value},{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent("script"),{async:"",src:"https://telegram.org/js/telegram-widget.js?22","data-telegram-post":e.url,"data-width":e.width,"data-userpic":e.authorPhoto,"data-color":e.color,"data-dark-color":e.darkColor,"data-dark":e.dark},null,8,["data-telegram-post","data-width","data-userpic","data-color","data-dark-color","data-dark"]))]),_:1}))}}),W=t.defineComponent({__name:"ShareWidget",props:{url:{type:String,required:!0},comment:{type:String,default:null},size:{type:String,default:null},noLabel:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(e){const a=e,n=t.computed(()=>JSON.stringify(a));return(r,i)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.tag),{key:n.value},{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent("script"),{async:"",src:"https://telegram.org/js/telegram-widget.js?22","data-telegram-share-url":e.url,"data-size":e.size,"data-comment":e.comment,"data-text":e.noLabel?"notext":null},null,8,["data-telegram-share-url","data-size","data-comment","data-text"]))]),_:1}))}}),D={ClosingConfirmation:"6.2",CloudStorage:"6.9",RequestWriteAccess:"6.9",RequestContact:"6.9",SettingsButton:"7.0",BiometricManager:"7.2",DisableVerticalSwipes:"7.7"};function V(e){return o.getWebApp().isVersionAtLeast(D[e])}function R(){const e=o.getWebApp(),{initData:a,initDataUnsafe:n,version:r,isReady:i,platform:s,isPlatform:u,sendData:p,ready:m,close:g}=o.useMiniApp("8.0"),l=u("unknown"),f=!l&&a==="";return{initData:a,initDataUnsafe:n,version:r,platform:s,isVersionAtLeast:e.isVersionAtLeast,sendData:p,ready:m,close:g,isReady:i,isPlatform:u,isPlatformUnknown:l,isFeatureSupported:V,onEvent:o.onEvent,canSendData:f}}function E(){const e=o.useBackButton("8.0");return{isBackButtonVisible:e.isVisible,showBackButton:e.show,hideBackButton:e.hide,onBackButtonClicked:o.onBackButtonClicked}}function L(){const{isInited:e,isBiometricAvailable:a,biometricType:n,isAccessRequested:r,isAccessGranted:i,deviceId:s,isBiometricTokenSaved:u,init:p,authenticate:m,requestAccess:g,openSettings:l,updateToken:f}=o.useBiometricManager("8.0");return{isBiometricInited:e,isBiometricAvailable:a,biometricType:n,isBiometricAccessRequested:r,isBiometricAccessGranted:i,isBiometricTokenSaved:u,biometricDeviceId:s,initBiometric:p,requestBiometricAccess:g,authenticateBiometric:m,updateBiometricToken:f,openBiometricSettings:l,onBiometricManagerUpdated:o.onBiometricManagerUpdated,onBiometricAuthRequested:o.onBiometricAuthRequested,onBiometricTokenUpdated:o.onBiometricTokenUpdated}}function F(){const{readText:e}=o.useClipboard("8.0");return{readTextFromClipboard:e,onClipboardTextReceived:o.onClipboardTextReceived}}function U(){const{isClosingConfirmationEnabled:e}=o.useMiniApp("8.0");return{isClosingConfirmationEnabled:e,enableClosingConfirmation(){e.value=!0},disableClosingConfirmation(){e.value=!1}}}function I(){const e=o.useCloudStorage("8.0");return{setStorageItem:e.setItem,getStorageItem:e.getItem,getStorageItems:e.getItems,removeStorageItem:e.removeItem,removeStorageItems:e.removeItems,getStorageKeys:e.getKeys}}function O(){const{impactOccurred:e,notificationOccurred:a,selectionChanged:n}=o.useHapticFeedback("8.0");return{impactOccurred:e,notificationOccurred:a,selectionChanged:n}}function Q(){const e=o.useMainButton("8.0");return{mainButtonText:e.text,mainButtonColor:e.color,mainButtonTextColor:e.textColor,isMainButtonVisible:e.isVisible,isMainButtonActive:e.isActive,isMainButtonProgressVisible:e.isProgressVisible,setMainButtonText(a){e.text.value=a},showMainButton:e.show,hideMainButton:e.hide,enableMainButton:e.enable,disableMainButton:e.disable,showMainButtonProgress:e.showProgress,hideMainButtonProgress:e.hideProgress,setMainButtonParams:e.setParams,onMainButtonClicked:o.onMainButtonClicked}}function j(){const{switchInlineQuery:e,openLink:a,openTelegramLink:n,openInvoice:r}=o.useMiniApp("8.0");return{switchInlineQuery:e,openLink:a,openTelegramLink:n,openInvoice:r,onInvoiceClosed:o.onInvoiceClosed}}function $(){const{showPopup:e,showAlert:a,showConfirm:n}=o.usePopup("8.0");return{showPopup:e,showAlert:a,showConfirm:n,onPopupClosed:o.onPopupClosed}}function H(){const e=o.useQrScanner("8.0");return{showScanQrPopup:e.show,closeScanQrPopup:e.close,onQrTextReceived:o.onQrTextReceived,onScanQrPopupClosed:o.onScanQrPopupClosed}}function G(){const{requestContact:e,requestWriteAccess:a}=o.useMiniApp("8.0");return{requestContact:e,requestWriteAccess:a,onContactRequested:o.onContactRequested,onWriteAccessRequested:o.onWriteAccessRequested}}function z(e,a){const n=a.serialize??JSON.stringify,r=t.ref(""),i=l=>{r.value=l,console.error(l)},s=t.ref(!1),{initData:u,initDataUnsafe:p,sendData:m,close:g}=o.useMiniApp("8.0");return{error:r,isLoading:s,execute:()=>{m(n(e)),setTimeout(()=>i("Telegram.WebApp.sendData is only available for custom keyboards."),1e3)},executeHttp:async(l,f={})=>{const q=f.closeAfter??!0;s.value=!0;try{const d=await fetch(l,{method:"POST",body:JSON.stringify({initData:u,initDataUnsafe:p,data:n(e)})});return d.ok||i(`${d.status} ${d.statusText}`),d.ok&&q&&g(),d}catch(d){i(String(d))}finally{s.value=!1}}}}function N(){const e=o.useSettingsButton("8.0");return{isSettingsButtonVisible:e.isVisible,showSettingsButton:e.show,hideSettingsButton:e.hide,onSettingsButtonClicked:o.onSettingsButtonClicked}}function J(){const{shareToStory:e}=o.useMiniApp("8.0");return{shareToStory:e}}function K(){const{colorScheme:e,themeParams:a,headerColor:n,backgroundColor:r}=o.useTheme("8.0");return{colorScheme:e,themeParams:a,headerColor:n,backgroundColor:r,setHeaderColor(i){i&&(n.value=i)},setBackgroundColor(i){i&&(r.value=i)},onThemeChanged:o.onThemeChanged}}function X(){const{isExpanded:e,expand:a,viewportHeight:n,viewportStableHeight:r,isVerticalSwipesEnabled:i}=o.useViewport("8.0");return{isExpanded:e,viewportHeight:n,viewportStableHeight:r,expand:a,isVerticalSwipesEnabled:i,enableVerticalSwipes(){i.value=!0},disableVerticalSwipes(){i.value=!1},onViewportChanged:o.onViewportChanged}}const Y={install(e){e.component("TgAlert",h),e.component("TgBackButton",S),e.component("TgBiometricManager",B),e.component("TgClosingConfirmation",C),e.component("TgConfirm",b),e.component("TgExpandedViewport",A),e.component("TgFullscreenViewport",y),e.component("TgMainButton",k),e.component("TgPopup",v),e.component("TgScanQr",w),e.component("TgSecondaryButton",x),e.component("TgSettingsButton",M),e.component("TgShareWidget",W),e.component("TgPostWidget",T),e.component("TgLoginWidget",P),e.component("TgDiscussionWidget",_)}};exports.isVersionAtLeast=o.isVersionAtLeast;exports.onAccelerometerChanged=o.onAccelerometerChanged;exports.onAccelerometerFailed=o.onAccelerometerFailed;exports.onAccelerometerStarted=o.onAccelerometerStarted;exports.onAccelerometerStopped=o.onAccelerometerStopped;exports.onActivated=o.onActivated;exports.onBackButtonClicked=o.onBackButtonClicked;exports.onBiometricAuthRequested=o.onBiometricAuthRequested;exports.onBiometricManagerUpdated=o.onBiometricManagerUpdated;exports.onBiometricTokenUpdated=o.onBiometricTokenUpdated;exports.onClipboardTextReceived=o.onClipboardTextReceived;exports.onContactRequested=o.onContactRequested;exports.onContentSafeAreaChanged=o.onContentSafeAreaChanged;exports.onDeactivated=o.onDeactivated;exports.onDeviceOrientationChanged=o.onDeviceOrientationChanged;exports.onDeviceOrientationFailed=o.onDeviceOrientationFailed;exports.onDeviceOrientationStarted=o.onDeviceOrientationStarted;exports.onDeviceOrientationStopped=o.onDeviceOrientationStopped;exports.onEmojiStatusAccessRequested=o.onEmojiStatusAccessRequested;exports.onEmojiStatusFailed=o.onEmojiStatusFailed;exports.onEmojiStatusSet=o.onEmojiStatusSet;exports.onEvent=o.onEvent;exports.onFileDownloadRequested=o.onFileDownloadRequested;exports.onFullscreenChanged=o.onFullscreenChanged;exports.onFullscreenFailed=o.onFullscreenFailed;exports.onGyroscopeChanged=o.onGyroscopeChanged;exports.onGyroscopeFailed=o.onGyroscopeFailed;exports.onGyroscopeStarted=o.onGyroscopeStarted;exports.onGyroscopeStopped=o.onGyroscopeStopped;exports.onHomeScreenAdded=o.onHomeScreenAdded;exports.onHomeScreenChecked=o.onHomeScreenChecked;exports.onInvoiceClosed=o.onInvoiceClosed;exports.onLocationManagerUpdated=o.onLocationManagerUpdated;exports.onLocationRequested=o.onLocationRequested;exports.onMainButtonClicked=o.onMainButtonClicked;exports.onPopupClosed=o.onPopupClosed;exports.onQrTextReceived=o.onQrTextReceived;exports.onSafeAreaChanged=o.onSafeAreaChanged;exports.onScanQrPopupClosed=o.onScanQrPopupClosed;exports.onSecondaryButtonClicked=o.onSecondaryButtonClicked;exports.onSettingsButtonClicked=o.onSettingsButtonClicked;exports.onShareMessageFailed=o.onShareMessageFailed;exports.onShareMessageSent=o.onShareMessageSent;exports.onThemeChanged=o.onThemeChanged;exports.onViewportChanged=o.onViewportChanged;exports.onWriteAccessRequested=o.onWriteAccessRequested;exports.useAccelerometer=c.useAccelerometer;exports.useBackButton=c.useBackButton;exports.useBiometricManager=c.useBiometricManager;exports.useClipboard=c.useClipboard;exports.useCloudStorage=c.useCloudStorage;exports.useDeviceOrientation=c.useDeviceOrientation;exports.useDeviceStorage=c.useDeviceStorage;exports.useEmojiStatus=c.useEmojiStatus;exports.useGyroscope=c.useGyroscope;exports.useHapticFeedback=c.useHapticFeedback;exports.useHomeScreen=c.useHomeScreen;exports.useLocationManager=c.useLocationManager;exports.useMainButton=c.useMainButton;exports.useMiniApp=c.useMiniApp;exports.usePopup=c.usePopup;exports.useQrScanner=c.useQrScanner;exports.useSecondaryButton=c.useSecondaryButton;exports.useSecureStorage=c.useSecureStorage;exports.useSettingsButton=c.useSettingsButton;exports.useTheme=c.useTheme;exports.useViewport=c.useViewport;exports.Alert=h;exports.BackButton=S;exports.BiometricManager=B;exports.ClosingConfirmation=C;exports.Confirm=b;exports.DiscussionWidget=_;exports.ExpandedViewport=A;exports.FullscreenViewport=y;exports.LoginWidget=P;exports.MainButton=k;exports.Popup=v;exports.PostWidget=T;exports.ScanQr=w;exports.SecondaryButton=x;exports.SettingsButton=M;exports.ShareWidget=W;exports.VueTelegramPlugin=Y;exports.useWebApp=R;exports.useWebAppBackButton=E;exports.useWebAppBiometricManager=L;exports.useWebAppClipboard=F;exports.useWebAppClosingConfirmation=U;exports.useWebAppCloudStorage=I;exports.useWebAppHapticFeedback=O;exports.useWebAppMainButton=Q;exports.useWebAppNavigation=j;exports.useWebAppPopup=$;exports.useWebAppQrScanner=H;exports.useWebAppRequests=G;exports.useWebAppSendData=z;exports.useWebAppSettingsButton=N;exports.useWebAppShare=J;exports.useWebAppTheme=K;exports.useWebAppViewport=X;
